<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mock Mail Client</title>
    <style>
        /* Basic Reset & Body */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: #f6f8fc;
            color: #202124;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden; /* Prevent body scroll */
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            padding: 8px 15px;
            border-bottom: 1px solid #dadce0;
            background-color: #f6f8fc;
            height: 60px;
            flex-shrink: 0;
        }

        .logo {
            font-weight: bold;
            font-size: 1.4em;
            color: #5f6368;
            margin-right: 30px;
            white-space: nowrap;
        }

        .search-container {
            position: relative;
            flex-grow: 1;
            margin-right: 20px;
            max-width: 720px; /* Limit search bar width like Gmail */
        }

        #searchInput {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid transparent; /* Initially transparent */
            border-radius: 8px;
            background-color: #eaf1fb;
            font-size: 1em;
            outline: none;
            transition: background-color 0.2s, box-shadow 0.2s;
        }

        #searchInput:focus {
            background-color: #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border-color: transparent; /* Keep border transparent on focus */
        }

        /* Autocomplete Styles */
        .autocomplete-items {
            position: absolute;
            border: 1px solid #dadce0;
            border-top: none;
            z-index: 99;
            top: 100%;
            left: 0;
            right: 0;
            background-color: #fff;
            border-radius: 0 0 8px 8px; /* Match input radius */
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            max-height: 300px;
            overflow-y: auto;
            display: none; /* Initially hidden */
        }

        .autocomplete-items div {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            font-size: 0.9em;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .autocomplete-items div:last-child {
            border-bottom: none;
        }

        .autocomplete-items div:hover {
            background-color: #f1f3f4;
        }
        .autocomplete-items div strong {
           color: #1a73e8; /* Highlight matching part if needed */
        }


        .header-actions {
            display: flex;
            align-items: center;
            white-space: nowrap;
        }

        .header-actions button,
        .header-actions span {
            margin-left: 15px;
            font-size: 0.9em;
        }

        #newMessageBtn {
            padding: 10px 20px;
            background-color: #c2e7ff; /* Light blue like compose */
            border: none;
            border-radius: 18px;
            cursor: pointer;
            font-weight: 500;
            color: #001d35; /* Darker text for contrast */
            transition: box-shadow .08s linear,min-width .15s cubic-bezier(0.4,0,0.2,1);
        }
        #newMessageBtn:hover {
             box-shadow: 0 1px 3px 0 rgba(60,64,67,.3), 0 4px 8px 3px rgba(60,64,67,.15);
             background-color: #c2e7ff;
        }


        #userName {
            font-weight: 500;
             color: #444746;
        }

        #logoutBtn {
            padding: 8px 12px;
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            border-radius: 4px;
            cursor: pointer;
        }
        #logoutBtn:hover {
             background-color: #f1b0b7;
        }


        /* Main Content Area */
        main {
            flex-grow: 1;
            overflow-y: auto; /* Allow main content to scroll */
            padding: 0;
            background-color: #fff;
            display: flex;
            flex-direction: column;
        }

        #messageList {
            flex-grow: 1;
            min-height: 0; /* Needed for flex-grow in overflow context */
        }

        /* Message Row Styling */
        .message-row {
            display: flex;
            align-items: center;
            padding: 8px 15px;
            border-bottom: 1px solid #e8eaed;
            cursor: pointer;
            font-size: 0.9em;
            position: relative; /* For hover shadow */
             transition: background-color 0.1s ease-out;
        }

        .message-row:hover {
            background-color: #f5f5f5;
            box-shadow: inset 1px 0 0 #dadce0, inset -1px 0 0 #dadce0, 0 1px 2px 0 rgba(60,64,67,.3), 0 1px 3px 1px rgba(60,64,67,.15);
            z-index: 2;
        }

        .message-sender {
            min-width: 150px;
            max-width: 200px;
            padding-right: 15px;
            font-weight: normal;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
             color: #5f6368;
        }

        .message-subject {
            flex-grow: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
             color: #5f6368;
             font-weight: normal;
             padding-right: 10px;
        }

        .message-row.unread .message-sender,
        .message-row.unread .message-subject {
            font-weight: bold;
            color: #202124; /* Darker color for unread */
        }


        .message-actions {
            margin-left: auto;
            display: flex;
            opacity: 0; /* Initially hidden */
            transition: opacity 0.1s ease-out;
            flex-shrink: 0; /* Prevent actions from shrinking */
        }

         .message-row:hover .message-actions {
             opacity: 1; /* Show actions on hover */
         }

        .message-actions button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            margin-left: 8px;
            font-size: 1.1em; /* Slightly larger icons/text */
             color: #5f6368;
             display: flex;
             align-items: center;
             justify-content: center;
             width: 28px;
             height: 28px;
             border-radius: 50%;
        }
        .message-actions button:hover {
             background-color: #e8eaed;
             color: #202124;
        }
        /* Simple text icons for demo */
        .action-reply::before { content: '‚Ü©Ô∏è'; }
        .action-forward::before { content: '‚Ü™Ô∏è'; }
        .action-export::before { content: 'üíæ'; }
        .action-delete::before { content: 'üóëÔ∏è'; }


        /* Pagination */
        #paginationControls {
            padding: 15px;
            text-align: right;
            border-top: 1px solid #e8eaed;
            background-color: #fff;
             flex-shrink: 0; /* Prevent pagination from shrinking */
             font-size: 0.9em;
             color: #5f6368;
        }

        #paginationControls button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px 10px;
            margin-left: 10px;
             color: #5f6368;
             font-size: 1.2em;
             border-radius: 4px;
        }
        #paginationControls button:hover:not(:disabled) {
            background-color: #f1f3f4;
        }

        #paginationControls button:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }
         #pageInfo {
             margin: 0 10px;
         }

    </style>
</head>
<body>

    <header>
        <div class="logo">M-Mail</div>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search mail">
            <div id="autocompleteList" class="autocomplete-items">
                </div>
        </div>
        <div class="header-actions">
            <button id="newMessageBtn">+ Compose</button>
            <span id="userName">Tina Tisch</span>
            <button id="logoutBtn">Logout</button>
        </div>
    </header>

    <main>
        <div id="messageList">
            </div>
         <div id="paginationControls">
            <span id="pageInfo"></span>
            <button id="prevPageBtn" title="Previous page" disabled>&lt;</button>
            <button id="nextPageBtn" title="Next page">&gt;</button>
        </div>
    </main>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const messageList = document.getElementById('messageList');
            const searchInput = document.getElementById('searchInput');
            const autocompleteList = document.getElementById('autocompleteList');
            const userNameDisplay = document.getElementById('userName'); // Use if needed
            const newMessageBtn = document.getElementById('newMessageBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            const prevPageBtn = document.getElementById('prevPageBtn');
            const nextPageBtn = document.getElementById('nextPageBtn');
            const pageInfo = document.getElementById('pageInfo');

            const MESSAGES_PER_PAGE = 50;
            let currentPage = 1;
            let mockMessages = [];
            let totalMessages = 0;

            // --- Mock Data Generation ---
            function generateMockMessages(count) {
                const senders = ["Alice Appleton", "Bob Baker", "Charlie Chaplin", "Diana Prince", "Ethan Hunt", "Fiona Gallagher", "George Gently", "Hannah Horvath", "Ian Malcolm", "Jane Jetson"];
                const subjects = ["Meeting Reminder", "Project Update", "Quick Question", "Weekend Plans", "Invoice Attached", "Fwd: Interesting Article", "Your Order Confirmation", "Re: Feedback Request", "Happy Birthday!", "Travel Itinerary"];
                const messages = [];
                for (let i = 1; i <= count; i++) {
                    messages.push({
                        id: `msg-${i}`,
                        sender: senders[Math.floor(Math.random() * senders.length)],
                        subject: subjects[Math.floor(Math.random() * subjects.length)] + (Math.random() > 0.8 ? ` #${i}` : ''), // Add some variation
                        read: false, // Initially all unread
                        timestamp: Date.now() - Math.floor(Math.random() * 1000 * 60 * 60 * 24 * 7) // Randomly within last week
                    });
                }
                // Sort by timestamp descending (newest first) - common in email
                messages.sort((a, b) => b.timestamp - a.timestamp);
                return messages;
            }

            // --- Rendering Logic ---
            function renderMessages() {
                messageList.innerHTML = ''; // Clear previous messages
                const startIndex = (currentPage - 1) * MESSAGES_PER_PAGE;
                const endIndex = startIndex + MESSAGES_PER_PAGE;
                const messagesToDisplay = mockMessages.slice(startIndex, endIndex);

                if (messagesToDisplay.length === 0 && currentPage > 1) {
                     // If deletion leads to empty page, go back
                    currentPage--;
                    renderMessages();
                    return;
                }

                messagesToDisplay.forEach(message => {
                    const row = document.createElement('div');
                    row.classList.add('message-row');
                    row.dataset.messageId = message.id;
                    if (!message.read) {
                        row.classList.add('unread');
                    }

                    const senderSpan = document.createElement('span');
                    senderSpan.classList.add('message-sender');
                    senderSpan.textContent = message.sender;

                    const subjectSpan = document.createElement('span');
                    subjectSpan.classList.add('message-subject');
                    subjectSpan.textContent = message.subject;

                    const actionsDiv = document.createElement('div');
                    actionsDiv.classList.add('message-actions');

                    // Action Buttons (non-functional for now)
                    const replyBtn = createActionButton('Reply', 'action-reply', message.id);
                    const forwardBtn = createActionButton('Forward', 'action-forward', message.id);
                    const exportBtn = createActionButton('Export', 'action-export', message.id);
                    const deleteBtn = createActionButton('Delete', 'action-delete', message.id);

                    actionsDiv.append(replyBtn, forwardBtn, exportBtn, deleteBtn);

                    row.append(senderSpan, subjectSpan, actionsDiv);
                    messageList.appendChild(row);
                });

                 // Scroll to top of message list when page changes
                 messageList.scrollTop = 0;

                updatePaginationControls();
            }

             function createActionButton(title, className, messageId) {
                 const button = document.createElement('button');
                 button.title = title;
                 button.classList.add(className);
                 button.dataset.messageId = messageId;
                 // Add simple alert for now to show interaction
                  button.addEventListener('click', (event) => {
                     event.stopPropagation(); // Prevent row click (mark as read)
                     handleActionClick(title.toLowerCase(), messageId);
                 });
                 return button;
             }


            // --- Pagination Logic ---
            function updatePaginationControls() {
                const totalPages = Math.ceil(totalMessages / MESSAGES_PER_PAGE);
                 const startItem = Math.min((currentPage - 1) * MESSAGES_PER_PAGE + 1, totalMessages);
                 const endItem = Math.min(currentPage * MESSAGES_PER_PAGE, totalMessages);

                if (totalMessages === 0) {
                     pageInfo.textContent = '0-0 of 0';
                 } else {
                    pageInfo.textContent = `${startItem}-${endItem} of ${totalMessages}`;
                 }

                prevPageBtn.disabled = currentPage === 1;
                nextPageBtn.disabled = currentPage === totalPages || totalPages === 0;
            }

            function goToPrevPage() {
                if (currentPage > 1) {
                    currentPage--;
                    renderMessages();
                }
            }

            function goToNextPage() {
                const totalPages = Math.ceil(totalMessages / MESSAGES_PER_PAGE);
                if (currentPage < totalPages) {
                    currentPage++;
                    renderMessages();
                }
            }

            // --- Message Interaction Logic ---
            function handleMessageClick(event) {
                 const row = event.target.closest('.message-row');
                 if (!row) return; // Clicked outside a row

                 const messageId = row.dataset.messageId;
                 const message = mockMessages.find(m => m.id === messageId);

                 if (message && !message.read) {
                     message.read = true;
                     row.classList.remove('unread');
                     // In a real app, you'd notify the backend here.
                     console.log(`Marked message ${messageId} as read.`);
                 }
                 // Add logic here to display message details if needed in future
                 console.log(`Clicked message ${messageId}`);
            }

             function handleActionClick(action, messageId) {
                 console.log(`Action "${action}" clicked for message ${messageId}`);
                 // Placeholder for future actions
                 alert(`Action: ${action} on message ${messageId}\n(This action is not yet implemented)`);

                 // Example: Implement Delete
                 if (action === 'delete') {
                     if (confirm(`Are you sure you want to delete message ${messageId}?`)) {
                        mockMessages = mockMessages.filter(m => m.id !== messageId);
                        totalMessages = mockMessages.length;
                        // Re-render the current page
                        renderMessages();
                     }
                 }
            }

            // --- Search Autocomplete Logic ---
            const baseAutocompleteItems = [
                { key: "messages", value: "all" },
                { key: "messages", value: "unread" },
                { key: "mailbox", value: "Tina Tisch" },
                { key: "mailbox", value: "Bernd Bank" },
                { key: "mailbox", value: "Violeta Jarmusch" },
                { key: "folder", value: "inbox" },
                { key: "folder", value: "outbox" },
                { key: "folder", value: "sent" },
                { key: "folder", value: "trash" },
                { key: "label", value: "urgent" },
                { key: "label", value: "done" },
            ];

            function showAutocomplete() {
                const query = searchInput.value.toLowerCase().trim();
                autocompleteList.innerHTML = ''; // Clear previous items

                let itemsToShow = [];

                // Filter base items
                if (query) {
                    itemsToShow = baseAutocompleteItems.filter(item =>
                        item.value.toLowerCase().includes(query)
                    );
                } else {
                     // Show all base items if query is empty (on focus)
                     itemsToShow = [...baseAutocompleteItems];
                 }


                // Add dynamic items if there's a query
                if (query) {
                    itemsToShow.unshift( // Add to the beginning
                        { key: "subject", value: query },
                        { key: "sender", value: query }
                    );
                }

                if (itemsToShow.length > 0) {
                    itemsToShow.forEach(item => {
                        const div = document.createElement('div');
                        // Basic highlighting (optional)
                        const valueDisplay = item.value.replace(
                            new RegExp(`(${query})`, 'gi'),
                            '<strong>$1</strong>'
                         );
                        div.innerHTML = `${item.key}: ${query ? valueDisplay : item.value}`;
                        div.dataset.value = `${item.key}:${item.value}`; // Store full value if needed
                        div.addEventListener('click', () => {
                            searchInput.value = `${item.key}:${item.value}`;
                            autocompleteList.style.display = 'none';
                            console.log(`Selected search: ${searchInput.value}`);
                            // Here you would trigger the actual search filtering logic
                             alert(`Search initiated for: ${searchInput.value}\n(Search filtering not implemented)`);
                        });
                        autocompleteList.appendChild(div);
                    });
                    autocompleteList.style.display = 'block';
                } else {
                    autocompleteList.style.display = 'none';
                }
            }

             function hideAutocomplete() {
                 // Delay hiding to allow click event on items to register
                 setTimeout(() => {
                     autocompleteList.style.display = 'none';
                 }, 150);
             }


            // --- Event Listeners ---
            prevPageBtn.addEventListener('click', goToPrevPage);
            nextPageBtn.addEventListener('click', goToNextPage);
            messageList.addEventListener('click', handleMessageClick);

            searchInput.addEventListener('focus', showAutocomplete);
            searchInput.addEventListener('input', showAutocomplete);
            searchInput.addEventListener('blur', hideAutocomplete);

             // Close autocomplete if clicked outside
            document.addEventListener('click', (event) => {
                if (!searchInput.contains(event.target) && !autocompleteList.contains(event.target)) {
                     autocompleteList.style.display = 'none';
                 }
             });

            // Dummy listeners for header buttons
             newMessageBtn.addEventListener('click', () => alert('Compose new message (not implemented)'));
             logoutBtn.addEventListener('click', () => alert('Logout (not implemented)'));


            // --- Initialization ---
            mockMessages = generateMockMessages(75); // Generate example messages (more than one page)
            totalMessages = mockMessages.length;
            renderMessages(); // Initial render
        });
    </script>

</body>
</html>